[build]
builder = "NIXPACKS"

[deploy]
startCommand = "gunicorn app_hf:app --bind 0.0.0.0:$PORT --workers 2 --timeout 120 --worker-class sync --max-requests 1000"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[nixpacks]
# Ensure system dependencies for audio processing
nixpkgs = ["python39", "gcc", "libsndfile"]
